// javascript:(function(){function extraerDatos(){const contenidoHTML=document.documentElement.outerHTML;const parser=new DOMParser();const doc=parser.parseFromString(contenidoHTML,'text/html');const tarjetasPropiedades=doc.querySelectorAll('[data-qa="posting PROPERTY"], [data-qa="posting DEVELOPMENT"]');console.log(`Se encontraron ${tarjetasPropiedades.length} tarjetas de propiedades`);let tarjetasAlternativas=[];if(tarjetasPropiedades.length===0){tarjetasAlternativas=doc.querySelectorAll('.postingCard-module__posting-top');console.log(`Se encontraron ${tarjetasAlternativas.length} propiedades usando selector alternativo`)}const tarjetasAProcesar=tarjetasPropiedades.length>0?tarjetasPropiedades:tarjetasAlternativas;const datos=[];tarjetasAProcesar.forEach((tarjeta,indice)=>{try{let tipoPropiedad=%27PROPERTY%27;if(tarjeta.hasAttribute(%27data-posting-type%27)){tipoPropiedad=tarjeta.getAttribute(%27data-posting-type%27)}else if(tarjeta.parentElement&&tarjeta.parentElement.hasAttribute(%27data-posting-type%27)){tipoPropiedad=tarjeta.parentElement.getAttribute(%27data-posting-type%27)}let enlace=%27%27;const elementoEnlace=tarjeta.querySelector(%27a[data-qa="POSTING_CARD_LINK"]%27)||tarjeta.querySelector(%27a[href*="/propiedades/"]%27);if(elementoEnlace){enlace=elementoEnlace.href||elementoEnlace.getAttribute(%27href%27)||%27%27;if(enlace&&!enlace.startsWith(%27http%27)){enlace=%27https://www.zonaprop.com.ar%27+(enlace.startsWith(%27/%27)?%27%27:%27/%27)+enlace}}datos.push({indice:indice+1,enlace,tipoPropiedad})}catch(error){console.error(`Error procesando propiedad ${indice}:`,error);datos.push({indice:indice+1,enlace:%27Error%27,tipoPropiedad:%27Error%27})}});console.log(`Se procesaron ${datos.length} propiedades`);const datosFiltrados=datos.filter(item=>item.enlace&&item.enlace!==%27Error%27&&item.enlace!==%27N/A%27);const encabezados=[%27#','Enlace','Tipo Propiedad'];const currentUrl=window.location.href;const urlObj=new URL(currentUrl);const pathname=urlObj.pathname;const filename=pathname.substring(1).replace(/\.html$/,'').replace(/\//g,'-');const BOM=new Uint8Array([0xEF,0xBB,0xBF]);let csv=encabezados.join(',')+'\n';datosFiltrados.forEach((item,index)=>{const itemConIndiceActualizado={...item,indice:index+1};const fila=[itemConIndiceActualizado.indice,%60"${itemConIndiceActualizado.enlace}"%60,%60"${itemConIndiceActualizado.tipoPropiedad}"%60];csv+=fila.join(',')+'\n'});const textEncoder=new TextEncoder();const csvContent=textEncoder.encode(csv);const csvWithBOM=new Uint8Array(BOM.length+csvContent.length);csvWithBOM.set(BOM);csvWithBOM.set(csvContent,BOM.length);const blob=new Blob([csvWithBOM],{type:'text/csv;charset=utf-8'});const url=URL.createObjectURL(blob);const enlace=document.createElement('a');enlace.setAttribute('href',url);enlace.setAttribute('download',%60${filename}.csv%60);enlace.style.display='none';document.body.appendChild(enlace);enlace.click();document.body.removeChild(enlace);URL.revokeObjectURL(url);const paginationInfo=analizarPaginacion(currentUrl);return{count:datosFiltrados.length,paginationInfo}}function analizarPaginacion(url){const urlObj=new URL(url);const path=urlObj.pathname;const pageMatch=path.match(/pagina-(\d+)\.html$/);if(pageMatch){const currentPage=parseInt(pageMatch[1]);const nextPage=currentPage+1;const basePath=path.replace(/pagina-\d+\.html$/,'');return{isFirstPage:false,currentPage,nextPage,basePath}}const htmlMatch=path.match(/(.+)\.html$/);if(htmlMatch){const basePath=htmlMatch[1];return{isFirstPage:true,currentPage:1,nextPage:2,basePath}}return{isFirstPage:false,currentPage:null,nextPage:null,basePath:null}}function irSiguientePagina(paginationInfo){if(!paginationInfo||!paginationInfo.basePath){alert('No se pudo determinar la siguiente página. Navega manualmente.');return}const urlObj=new URL(window.location.href);const baseUrl=urlObj.origin;if(paginationInfo.isFirstPage){window.location.href=%60${baseUrl}${paginationInfo.basePath}-pagina-${paginationInfo.nextPage}.html%60;return}else if(paginationInfo.currentPage&&paginationInfo.nextPage){window.location.href=%60${baseUrl}${paginationInfo.basePath}pagina-${paginationInfo.nextPage}.html%60;return}alert('No se pudo determinar la siguiente página. Navega manualmente.')}const resultado=extraerDatos();setTimeout(()=>{irSiguientePagina(resultado.paginationInfo)},1000)})();